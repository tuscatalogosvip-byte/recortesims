<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PWA Ejemplo: Instalar App</title>
<link rel="manifest" href="manifest.json" />
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 20px;
    max-width: 600px;
    margin: auto;
    background: linear-gradient(135deg, #0ced6b, #6dd5fa);
    color: white;
    text-align: center;
    border-radius: 12px;
  }
  button {
    background-color: #0ced6b;
    cursor: pointer;
    border: none;
    border-radius: 8px;
    color: white;
    padding: 15px 30px;
    font-weight: 600;
    font-size: 1.2em;
    margin-top: 20px;
    display: none;
  }
  button:hover {
    background-color: #1e8449;
  }
</style>
</head>
<body>
  <h1>Bienvenido a la PWA de Ejemplo</h1>
  <p>Esta app puede instalarse en PC y móviles.</p>
  <button id="btnInstall">Instalar aplicación</button>

<script>
  let deferredPrompt;
  const btnInstall = document.getElementById('btnInstall');

  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    btnInstall.style.display = 'inline-block';
  });

  btnInstall.addEventListener('click', async () => {
    if (!deferredPrompt) return;
    deferredPrompt.prompt();
    const choiceResult = await deferredPrompt.userChoice;
    if (choiceResult.outcome === 'accepted') {
      console.log('Usuario aceptó la instalación');
    } else {
      console.log('Usuario rechazó la instalación');
    }
    deferredPrompt = null;
    btnInstall.style.display = 'none';
  });

  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('service-worker.js')
      .then(() => console.log('Service Worker registrado correctamente'))
      .catch(e => console.error('Error al registrar Service Worker', e));
    });
  }
</script>
</body>
</html>

